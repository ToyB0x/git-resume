# ドキュメント検証システム

**更新日**: 2025/3/23
**確認日**: 2025/3/23

## 目的

- 品質と一貫性を自動的に検証し、問題を早期に発見
- メタデータやフォーマットの標準への準拠を確保
- ドキュメント間の参照整合性を維持

## AIプロンプトベースの検証システム

LLM（大規模言語モデル）を活用したドキュメント検証と管理のためのプロンプト体系：

### 主要プロンプトパターン一覧

| 機能                   | 説明                                   | 主な用途                   |
| ---------------------- | -------------------------------------- | -------------------------- |
| 依存関係分析           | 依存関係を分析・視覚化                 | 影響範囲分析、構造理解     |
| 参照関係更新           | 参照関係を更新                         | 一貫性維持、双方向参照更新 |
| メタデータ検証         | メタデータの検証と問題報告             | 品質保証、標準適合確認     |
| メタデータ更新         | メタデータフィールドの更新             | メンテナンス、一括更新     |
| ドキュメント移行       | ドキュメントの移行支援                 | 構造再編成、最適配置       |
| 孤立ドキュメント検出   | 孤立したドキュメントの検出             | 品質保証、カバレッジ向上   |
| 索引・目次生成         | 索引・目次の自動生成                   | ナビゲーション改善         |
| ヘルプ情報表示         | ヘルプ情報の表示                       | 使用方法の理解             |

### AIプロンプト使用例

#### 依存関係の分析

```
@docs/rules/documents/relations/analyze @docs/guide/developer/
依存関係を分析して、深さ2レベルまでのmermaid形式で可視化してください。
```

#### メタデータの検証

```
@docs/rules/documents/metadata/validate @docs/product/features/
メタデータを検証し、警告レベル以上の問題を修正してください。
```

#### 孤立ドキュメントの検出

```
@docs/rules/orphans/find @docs/
README.mdを除く、参照されていないドキュメントと参照先が存在しないドキュメントを検出してください。
```

#### 索引の生成

```
@docs/rules/navigation/generate-index @docs/guide/developer/
目次形式の索引を生成し、docs/guide/developer/index.mdに出力してください。
```

#### 全ルールの一括適用

```
@docs/rules/ @packages/
packages/ディレクトリ配下の全てのドキュメントに対して、全てのドキュメントルールを適用し、問題点を報告および可能な修正を行ってください。各ルールの適用状況と修正内容を一覧でまとめてください。
```

#### ドキュメント全体の整合性チェック

```
@docs/rules/validation.md @docs/
docs配下のドキュメント全体の整合性をチェックし、PLAN.md, PROGRESS.md, README.md, rules/structure.md, rules/README.md間の矛盾、およびrules配下のファイル間の参照関係の矛盾を修正してください。
```

## 検証項目

- **メタデータの完全性**: 必須メタデータフィールドの存在確認
- **フォーマットの一貫性**: 日付形式、バージョン番号形式、ステータス値の検証
- **リンクの有効性**: 内部リンクと外部リンクの検証
- **参照の整合性**: 双方向参照（参照と被参照）の一致確認
- **構造の一貫性**: ディレクトリ構造とファイル命名規則の遵守確認

## AIを活用した検証プロセス

- ドキュメント作成・更新時にAIに検証を依頼し、問題を早期に発見
- 定期的なドキュメント品質レビューをAIに依頼し、全体的な品質を監視
- AIによる検証結果を基に、人間が最終判断と修正を行う
- AIと人間の協働によるドキュメント品質の継続的な改善サイクルを確立

## AIインストラクション

このルールを読んだAIは以下の行動をとってください：

- 指定形式（@docs/rules/[ルール名]/ @[TARGET_DIR]）でプロンプトを構成し、検証機能を適切に使い分ける
- メタデータ完全性、フォーマット一貫性、リンク有効性、参照整合性などを検証し、明確な報告と改善案を提示する
- 人間との協働を前提とした検証プロセスを実施し、定期的な品質レビューを通じて継続的改善を支援する
- 人間との協働を意識し、検証結果を基に人間が最終判断できるよう情報を整理する
- `docs`配下のドキュメント全体の整合性をチェックする機能があることを理解する
- `docs/PLAN.md`、`docs/PROGRESS.md`、`docs/README.md`、`docs/rules/structure.md`、`docs/rules/README.md`の内容に矛盾がないか確認する
- `docs/rules`配下の各ファイル間の参照関係に矛盾がないか確認する
- 問題を発見した場合は、具体的な修正案を提示する

## メタデータ

**更新・確認情報**:
- 最終更新日: 2025/03/23
- 最終確認日: 2025/03/23

**文書情報**:
- ステータス: 承認済み
- バージョン: 1.0.0

## 関連ドキュメント

- [ドキュメントガイドライン](../../README.md)
- [ドキュメントメタデータ標準](./documents/metadata.md)

## Changelog

- 2025/03/23: [追加] メタデータと関連ドキュメントセクションを追加
- 2025/03/23: [変更] AIインストラクションを更新
- 2025/03/23: [追加] ドキュメント全体の整合性チェックに関するプロンプト例を追加
- 2025/03/23: 初回作成