# ドキュメント検証システム

**更新日**: 2025/3/23
**確認日**: 2025/3/23

## 目的

- 品質と一貫性を自動的に検証し、問題を早期に発見する
- メタデータやフォーマットの標準への準拠を確保する
- ドキュメント間の参照整合性を維持する
- LLMを活用した効率的な検証と修正を実現する

## AIプロンプトベースの検証システム

git-resumeプロジェクトでは、LLM（大規模言語モデル）を活用したドキュメント検証と管理のためのプロンプト体系を導入します。これにより、ドキュメントの品質維持と一貫性確保を効率化します。

### 主要プロンプトパターン一覧

| 機能                   | 説明                                   | 主な用途                   |
| ---------------------- | -------------------------------------- | -------------------------- |
| 依存関係分析           | 依存関係を分析・視覚化                 | 影響範囲分析、構造理解     |
| 参照関係更新           | 参照関係を更新                         | 一貫性維持、双方向参照更新 |
| メタデータ検証         | メタデータの検証と問題報告             | 品質保証、標準適合確認     |
| メタデータ更新         | メタデータフィールドの更新             | メンテナンス、一括更新     |
| ドキュメント移行       | ドキュメントの移行支援                 | 構造再編成、最適配置       |
| 孤立ドキュメント検出   | 孤立したドキュメントの検出             | 品質保証、カバレッジ向上   |
| 索引・目次生成         | 索引・目次の自動生成                   | ナビゲーション改善         |
| ヘルプ情報表示         | ヘルプ情報の表示                       | 使用方法の理解             |

### AIプロンプト使用例

#### 依存関係の分析

```
@docs/rules/dependencies/analyze @docs/guide/developer/
依存関係を分析して、深さ2レベルまでのmermaid形式で可視化してください。
```

#### メタデータの検証

```
@docs/rules/metadata/validate @docs/product/features/
メタデータを検証し、警告レベル以上の問題を修正してください。
```

#### 孤立ドキュメントの検出

```
@docs/rules/orphans/find @docs/
README.mdを除く、参照されていないドキュメントと参照先が存在しないドキュメントを検出してください。
```

#### 索引の生成

```
@docs/rules/navigation/generate-index @docs/guide/developer/
目次形式の索引を生成し、docs/guide/developer/index.mdに出力してください。
```

#### 全ルールの一括適用

```
@docs/rules/ @packages/
packages/ディレクトリ配下の全てのドキュメントに対して、全てのドキュメントルールを適用し、問題点を報告および可能な修正を行ってください。各ルールの適用状況と修正内容を一覧でまとめてください。
```

## 検証項目

ドキュメント検証システムは、以下の項目を検証します：

### 1. メタデータの完全性

- 必須メタデータ（更新日、確認日）の存在確認
- メタデータ形式の検証（日付形式、バージョン番号形式など）
- メタデータの最新性チェック（一定期間以上更新されていないドキュメントの検出）

### 2. フォーマットの一貫性

- マークダウン記法の適切な使用
- 見出しレベルの適切な階層構造
- コードブロックの言語指定
- リストやテーブルの正しい形式
- 図表の適切な表現

### 3. リンクの有効性

- 内部リンクの存在確認
- 外部リンクの到達可能性確認
- リンクテキストの適切性チェック
- 相対パスの正確性

### 4. 参照の整合性

- 双方向参照（参照と被参照）の一致確認
- 孤立したドキュメントの検出
- 循環参照の検出と警告

### 5. 構造の一貫性

- ディレクトリ構造の規約準拠
- ファイル命名規則の遵守
- 必須セクションの存在確認
- ドキュメント種別に応じた必須要素のチェック

### 6. 内容の品質

- 専門用語や略語の初出時の説明
- 文書の読みやすさと明瞭さ
- コード例の正確性と最新性
- 古い情報や非推奨機能の注記

## 検証と修正のワークフロー

### 1. 定期的な自動検証

- 週次または月次で全ドキュメントの自動検証を実行
- 検証結果をレポートとして生成し、問題点を可視化

### 2. 段階的な問題修正

検出された問題は、以下の優先順位で修正を行います：

1. **重大な問題**: リンク切れ、必須メタデータの欠落、構造的な不整合
2. **警告レベルの問題**: 古いメタデータ、フォーマットの不一致、参照の不整合
3. **提案レベルの問題**: 改善提案、最適化の余地がある点

### 3. AIを活用した自動修正

- 単純な問題（メタデータ更新、フォーマット修正など）は自動修正
- 複雑な問題は修正案を提示し、人間の確認を経て適用

### 4. 人間によるレビューと最終承認

- 自動修正された内容の人間によるレビュー
- 複雑な問題に対する修正戦略の決定
- 最終的な修正の承認と適用

## AIを活用した検証プロセス

LLMを効果的に活用してドキュメント検証を行うためのベストプラクティス：

1. **明確なプロンプト設計**: 検証目的と対象を明確にしたプロンプトを設計
2. **コンテキスト管理**: 関連するドキュメントルールを適切にコンテキストとして提供
3. **段階的な検証**: 複雑な検証は複数のステップに分解し、順次実行
4. **フィードバックループ**: 検証結果を分析し、プロンプトや検証プロセスを継続的に改善
5. **人間とAIの協働**: AIによる一次検証と人間による最終判断を組み合わせた効率的なプロセス

## 検証実行のタイミング

ドキュメント検証は、以下のタイミングで実行することを推奨します：

1. **新規ドキュメント作成時**: 基本的な構造とフォーマットを確認
2. **既存ドキュメント更新時**: 変更箇所と関連ドキュメントへの影響を確認
3. **定期的な全体検証**: 週次または月次で全ドキュメントの状態を検証
4. **大規模な構造変更前後**: 影響範囲の分析と問題の事前/事後検出
5. **リリース前**: リリースノートやユーザーガイドの最終確認

## AIインストラクション

このルールを読んだAIは以下の行動をとってください：

- 指定形式（@docs/rules/[ルール名]/ @[TARGET_DIR]）でプロンプトを構成し、検証機能を適切に使い分ける
- メタデータ完全性、フォーマット一貫性、リンク有効性、参照整合性などを検証し、明確な報告と改善案を提示する
- 人間との協働を前提とした検証プロセスを実施し、定期的な品質レビューを通じて継続的改善を支援する
- 検証結果を分かりやすく構造化し、問題の重要度に応じて優先順位を付けて報告する
- 自動修正可能な問題と人間の判断が必要な問題を明確に区別し、適切な対応を提案する

## Changelog

- 2025/3/23: docs/rules/meta/validation.md から docs/rules/validation.md に移動
- 2025/3/23: 検証システムの実装方法を削除し、プロンプトベースのアプローチに焦点を当てた内容に修正
- 2025/3/23: 初回作成