# プロンプト履歴の記録ルール

**更新日**: 2025/3/21
**確認日**: 2025/3/21

このファイルは、git-resumeプロジェクトにおいてClineがプロンプト履歴を記録する際のルールを定めています。対話履歴を一貫した形式で記録することで、開発の文脈や意思決定の理由を明確に残し、プロジェクトの理解と継続的な開発をサポートします。

## プロンプト履歴の基本形式

```
Prompt History:
Q: ユーザーからの質問や指示1
A: AIからの回答や実行内容の要約1

Q: ユーザーからの質問や指示2
A: AIからの回答や実行内容の要約2
```

- **Q**: ユーザーからの質問や指示（必須）
- **A**: AIからの回答や実行内容の要約（必須）

## 記録する情報

1. **ユーザーの質問・指示**
   - 元の質問や指示をそのまま記録
   - 長文の場合は核となる部分を抽出して記録

2. **AIの回答・実行内容**
   - 実行したアクションの要約
   - 重要な決定事項
   - 生成したコードやファイルの概要

## プロンプト履歴の記録例

### 良い例

```
Prompt History:
Q: APIエンドポイントにページネーション機能を追加してください
A: src/routes/api/github/getUserRepos.tsファイルにページネーション機能を実装。
   - limit, offsetパラメータの追加
   - クエリパラメータのバリデーション追加
   - レスポンスにtotalCountフィールド追加

Q: ユニットテストも追加できますか？
A: src/tests/routes/api/github/getUserRepos.test.tsファイルを作成し、以下のテストケースを実装:
   - 正常系: パラメータあり/なしのケース
   - 異常系: 不正なパラメータ値の検証
   - モック: GitHubサービスのモックを使用
```

### 避けるべき例

```
Q: APIの改善
A: 修正しました
```
→ 具体的な内容がなく、後から見ても何をしたのかわからない

```
Q: [長い質問文をそのまま貼り付け...]
A: [生成したコード全体をそのまま貼り付け...]
```
→ 重要なポイントが埋もれてしまい、要点が把握しづらい

## 記録時の注意点

1. **簡潔さと具体性のバランス**
   - 詳細すぎず、かつ具体的な情報を含める
   - 実施した変更の本質を捉える

2. **重要な意思決定の記録**
   - なぜその実装方法を選んだのか
   - 検討した代替案とその比較

3. **ファイル参照の明示**
   - 変更したファイルのパスを明記
   - 新規作成したファイルを明示

4. **継続的な対話の文脈維持**
   - 関連する一連の対話はまとめて記録
   - 新しいトピックの場合は明確に区切る

## Changelog

- 2025/3/21: 「コミットメッセージのルール」から「プロンプト履歴の記録ルール」に内容変更
